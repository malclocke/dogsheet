<h1><%= link_to '<', "/timesheet/#{@date.yesterday}" -%>
    <%= @date -%>
    <%= link_to '>', "/timesheet/#{@date.tomorrow}" -%></h1>
<table id="timesheet">
  <thead>
    <tr>
      <th>Date</th>
      <th>Started</th>
      <th>Finished</th>
      <th>Client</th>
      <th>Task</th>
      <th>Duration</th>
      <th>Decimal time</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% unless @timeslices.count > 0 %>
    <tr>
      <td colspan="7">No tasks</td>
    </tr>
    <% end %>
    <% for timeslice in @timeslices %>
    <tr>
      <td><%= timeslice.started.to_date %></td>
      <td><%= link_to timeslice.started.to_s(:time_only), timeslice_path(timeslice) %></td>
      <td><%= link_to timeslice.finished.to_s(:time_only), timeslice_path(timeslice) %></td>
      <td><%= link_to timeslice.task.client.name, client_path(timeslice.task.client) %></td>
      <td><%= render :partial => timeslice.task %></td>
      <td><%= timeslice.hours_and_minutes %></td>
      <td><%= timeslice.decimal_hours %></td>
      <td>
        <%= link_to 'Edit', edit_timeslice_path(timeslice) %>
        <%= link_to 'Destroy', timeslice, :confirm => 'Are you sure?', :method => :delete %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<hr />

<% form_for(@timeslice) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :task_id %>
    <%= select_tag(:task_id, 
            options_from_collection_for_select(Task.all, :id, :name)) %>
    <%= f.label :started_time %>
    <%= f.text_field :started_time, :size => 4 %>
    <%= f.label :finished_time %>
    <%= f.text_field :finished_time, :size => 4 %>
    <%= f.submit "Create" %>
  </p>
<% end %>
